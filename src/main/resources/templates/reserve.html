<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head th:replace="~{fragments/head :: common-head(title='라온아띠 - 예약')}"></head>

<body>
<header th:replace="~{fragments/header :: common-header}"></header>

<main>
    <section class="page-hero reserve-hero" style="height: 300px;">
        <div class="page-hero-overlay"></div>
        <div class="container page-hero-content">
            <h1 class="page-title">Real-time Booking</h1>
            <p class="page-subtitle">편안한 휴식을 위한 첫걸음, 날짜를 선택해주세요.</p>
        </div>
    </section>

    <section class="section container">
        <div class="booking-container">

            <div class="calendar-wrapper">
                <div class="calendar-header">
                    <button id="prev-month" class="cal-nav-btn"><i class="fa-solid fa-chevron-left"></i></button>
                    <h2 id="current-month-year">2026년 1월</h2>
                    <button id="next-month" class="cal-nav-btn"><i class="fa-solid fa-chevron-right"></i></button>
                </div>

                <div class="calendar-days-header">
                    <span class="sun">Sun</span><span>Mon</span><span>Tue</span><span>Wed</span><span>Thu</span><span>Fri</span><span class="sat">Sat</span>
                </div>

                <div id="calendar-grid" class="calendar-grid">
                </div>
            </div>

            <div class="booking-sidebar">
                <h3 class="sidebar-title">예약 정보</h3>

                <div class="form-group">
                    <label>선택된 날짜</label>
                    <div id="selected-date-display" class="display-box placeholder">
                        날짜를 선택해주세요
                    </div>
                </div>

                <div class="form-group">
                    <label for="guest-count">투숙객 수</label>
                    <select id="guest-count" class="form-select">
                        <option value="2">성인 6명</option>
                        <option value="3">성인 7명</option>
                        <option value="4">성인 8명</option>
                        <option value="5">성인 9명 </option>
                        <option value="5">성인 10명 </option>
                        <option value="5">성인 11명 </option>
                        <option value="5">성인 12명 (최대)</option>
                    </select>
                </div>

                <div class="price-summary" id="price-section" style="display: none;">
                    <div class="price-row">
                        <span>객실 요금</span>
                        <span id="room-price">0원</span>
                    </div>
                    <div class="price-row total">
                        <span>총 합계</span>
                        <span id="total-price">0원</span>
                    </div>
                </div>

                <div class="sidebar-actions">
                    <button id="btn-check-avail" class="btn btn-primary full-width">
                        예약 가능 여부 확인
                    </button>
                    <button id="btn-submit-booking" class="btn btn-success full-width" style="display: none;">
                        예약하기
                    </button>
                </div>
            </div>

        </div>
    </section>
</main>

<div id="booking-modal" class="modal-overlay hidden">
    <div class="modal-content">
        <div class="modal-header">
            <h3>예약 요청하기</h3>
            <button id="btn-close-modal" class="btn-close-modal"><i class="fa-solid fa-xmark"></i></button>
        </div>

        <div class="modal-body">
            <div class="booking-summary">
                <div class="summary-item">
                    <span class="label">체크인</span>
                    <span id="modal-date" class="value">2026-01-01</span>
                </div>
                <div class="summary-item">
                    <span class="label">인원</span>
                    <span id="modal-guests" class="value">2명</span>
                </div>
                <div class="summary-item total">
                    <span class="label">예상 금액</span>
                    <span id="modal-price" class="value highlight">0원</span>
                </div>
            </div>

            <p class="info-text">
                * 예약 신청 후 <strong>12시간 이내</strong>에 입금이 확인되어야 예약이 확정됩니다.<br>
                (추후 카카오페이 결제 연동 예정)
            </p>

            <form id="booking-form">
                <div class="form-group">
                    <label for="booker-name">예약자 성함</label>
                    <input type="text" id="booker-name" placeholder="홍길동" required>
                </div>

                <div class="form-group">
                    <label for="booker-phone">연락처</label>
                    <div class="input-group-row">
                        <input type="tel" id="booker-phone" placeholder="01012345678" required>
                        <button type="button" id="btn-send-code" class="btn btn-primary btn-sm">인증번호 발송</button>
                    </div>
                </div>

                <div class="form-group" id="verify-group" style="display: none;">
                    <label for="verify-code">인증번호</label>
                    <div class="input-group-row">
                        <input type="text" id="verify-code" placeholder="인증번호 6자리" maxlength="6">
                        <button type="button" id="btn-check-code" class="btn btn-outline btn-sm">확인</button>
                    </div>
                    <small id="verify-message" style="margin-top: 5px; display: block;"></small>
                </div>

                <div class="form-group">
                    <label for="booker-email">이메일 (선택)</label>
                    <input type="email" id="booker-email" placeholder="example@naver.com" >
                </div>

                <div class="form-group">
                    <label for="booker-password">예약 확인 비밀번호 (숫자 4자리)</label>
                    <input type="password" id="booker-password" placeholder="1234" maxlength="4" required>
                    <small>예약 조회 시 사용됩니다.</small>
                </div>

                <div class="form-group">
                    <label for="booker-request">요청사항 (선택)</label>
                    <textarea id="booker-request" rows="3" placeholder="바비큐 그릴 준비 부탁드립니다."></textarea>
                </div>
            </form>
        </div>

        <div class="modal-footer">
            <button id="btn-final-request" class="btn btn-primary full-width">
                위 내용으로 예약 요청
            </button>
        </div>
    </div>
</div>

<footer th:replace="~{fragments/footer :: common-footer}"></footer>

<script th:src="@{/js/booking.js}"></script>

</body>
</html>